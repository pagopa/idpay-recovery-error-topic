asyncapi: 2.0.0
info:
  title: Recovery Error Topic
  version: 1.0.0
  description: >-
    Its purpose is to manage the messages published on the error topic
tags:
  - name: "consumeRCRewardCalculatorError"
    description: "Consume reward calculator error"
  - name: "rescheduleRCRewardTransactionMessage"
    description: "Reschedule RewardTransaction message"
  - name: "rescheduleRCRewardRuleBuilderMessage"
    description: "Reschedule RewardRuleBuilder message"
  - name: "rescheduleRCHpanUpdateEvaluationMessage"
    description: "Reschedule HpanUpdateEvaluation message"
  - name: "rescheduleRCUserCounterUnlockEvaluationMessage"
    description: "Reschedule UserCounterUnlockEvaluation message"

  - name: "consumePaymentInstrumentError"
    description: "Consume payment instrument error"
  - name: "rescheduleRtdMessage"
    description: "Reschedule rtd message"
  - name: "rescheduleRuleEngineMessage"
    description: "Reschedule rule engine message"

  - name: "consumeWalletError"
    description: "Consume wallet error"
  - name: "rescheduleWalletEnrollIbanMessage"
    description: "Reschedule wallet message"
  - name: "rescheduleWalletRewardTransactionMessage"
    description: "Reschedule wallet message"
  - name: "rescheduleWalletNotificationMessage"
    description: "Reschedule wallet message"
  - name: "rescheduleWalletTimelineMessage"
    description: "Reschedule wallet message"

  - name: "consumeTransactionError"
    description: "Consume Transaction error"
  - name: "rescheduleNotifyTransactionMessage"
    description: "Reschedule transaction message"
  - name: "rescheduleNotifyTransactionCommandsMessage"
    description: "Reschedule transaction message"


  - name: "consumeRewardNotificationError"
    description: "Consume reward notification error"
  - name: "rescheduleRewardNotificationRefundRuleNotifyMessage"
    description: "Reschedule reward notification message"
  - name: "rescheduleRewardNotificationRewardTrxNotifyEvaluationMessage"
    description: "Reschedule reward notification message"
  - name: "rescheduleRewardNotificationIbanNotifyOutcomeEvaluationMessage"
    description: "Reschedule reward notification message"
  - name: "rescheduleRewardNotificationUploadMessage"
    description: "Reschedule reward notification message"
  - name: "rescheduleRewardNotificationFeedbackMessage"
    description: "Reschedule reward notification message"
  - name: "rescheduleRewardNotificationDeleteInitiativeMessage"
    description: "Reschedule reward notification message"

  - name: "consumeIbanError"
    description: "Consume iban error"
  - name: "rescheduleIbanToWalletMessage"
    description: "Reschedule iban message"
  - name: "rescheduleCheckIbanMessage"
    description: "Reschedule iban message"

  - name: "consumeAdmissibilityAssessorError"
    description: "Consume admissibility-assessor error"
  - name: "rescheduleBeneficiaryRuleMessage"
    description: "Reschedule admissibility-assessor message"
  - name: "rescheduleCommandMediatorMessage"
    description: "Reschedule admissibility-assessor message"
  - name: "rescheduleOnboardingRequestMessage"
    description: "Reschedule admissibility-assessor message"
  - name: "rescheduleOnboardingNotifierMessage"
    description: "Reschedule admissibility-assessor message"
  - name: "rescheduleRankingNotifierMessage"
    description: "Reschedule admissibility-assessor message"

  - name: "consumeRewardUserIdSplitterError"
    description: "Consume reward user id splitter error"
  - name: "rescheduleTransactionEvaluationNotifyMessage"
    description: "Reschedule reward user id splitter message"
  - name: "rescheduleEnrichedTransactionMessage"
    description: "Reschedule reward user id splitter message"

channels:

  recovery-consume-reward-calculator-error:
    subscribe:
      message:
        $ref: '#/components/messages/ConsumeRewardCalculatorError'
      bindings:
        kafka:
          topic: idpay-error-topic
      tags:
        - name: "consumeRewardCalculatorError"
  recovery-reschedule-Reward-Transaction-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRewardTransactionMessage'
      bindings:
        kafka:
          topic: idpay-rule-update
      tags:
        - name: "rescheduleRewardTransactionMessage"
  recovery-reschedule-Reward-Rule-Builder-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRewardRuleBuilderMessage'
      bindings:
        kafka:
          topic: idpay-hpan-update
      tags:
        - name: "rescheduleRewardRuleBuilderMessage"
  recovery-reschedule-Hpan-Update-Evaluation-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleHpanUpdateEvaluationMessage'
      bindings:
        kafka:
          topic: idpay-transaction
      tags:
        - name: "rescheduleHpanUpdateEvaluationMessage"
  recovery-reschedule-User-Counter-Unlock-Evaluation-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleUserCounterUnlockEvaluationMessage'
      bindings:
        kafka:
          topic:
      tags:
        - name: "rescheduleUserCounterUnlockEvaluationMessage"

  recovery-consume-payment-instrument-error:
    subscribe:
      message:
        $ref: '#/components/messages/ConsumePaymentInstrumentError'
      bindings:
        kafka:
          topic: idpay-error-topic
      tags:
        - name: "consumePaymentInstrumentError"
  recovery-reschedule-Rtd-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRtdMessage'
      bindings:
        kafka:
          topic: rtd_pi_from_app_topic
      tags:
        - name: "rescheduleRtdMessage"
  recovery-reschedule-Rule-:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRuleEngineMessage'
      bindings:
        kafka:
          topic: idpay_hpan_update_topic
      tags:
        - name: "rescheduleRuleEngineMessage"

  recovery-consume-wallet-error:
    subscribe:
      message:
        $ref: '#/components/messages/ConsumeWalletError'
      bindings:
        kafka:
          topic: idpay-error-topic
      tags:
        - name: "consumeWalletError"
  recovery-reschedule-Wallet-Enroll-Iban-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleWalletEnrollIbanMessage'
      bindings:
        kafka:
          topic:  idpay_checkiban_evaluation_topic
      tags:
        - name: "rescheduleWalletEnrollIbanMessage"
  recovery-reschedule-Wallet-Reward-Transaction-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleWalletRewardTransactionMessage'
      bindings:
        kafka:
          topic: idpay_reward_notification_response_topic
      tags:
        - name: "rescheduleWalletRewardTransactionMessage"
  recovery-reschedule-Wallet-Notification-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleWalletNotificationMessage'
      bindings:
        kafka:
          topic: idpay_notification_request_topic
      tags:
        - name: "rescheduleWalletNotificationMessage"
  recovery-reschedule-Wallet-Timeline-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleWalletTimelineMessage'
      bindings:
        kafka:
          topic: idpay_timeline_topic
      tags:
        - name: "rescheduleWalletTimelineMessage"

  recovery-consume-transaction-error:
    subscribe:
      message:
        $ref: '#/components/messages/ConsumeTransactionError'
      bindings:
        kafka:
          topic: idpay-error-topic
      tags:
        - name: "consumeTransactionError"
  recovery-reschedule-Notify-Transaction-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleNotifyTransactionMessage'
      bindings:
        kafka:
          topic: idpay-transaction
      tags:
        - name: "rescheduleTransactionMessage"
  recovery-reschedule-Notify-Transaction-Commands-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleNotifyTransactionCommandsMessage'
      bindings:
        kafka:
          topic: idpay-commands
      tags:
        - name: "rescheduleNotifyTransactionCommandsMessage"

  recovery-consume-reward-notification-error:
    subscribe:
      message:
        $ref: '#/components/messages/ConsumeRewardNotificationError'
      bindings:
        kafka:
          topic: idpay-error-topic
      tags:
        - name: "consumeRewardNotificationError"
  recovery-reschedule-Reward-Notification-Refund-Rule-Notify-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRewardNotificationRefundRuleNotifyMessage'
      bindings:
        kafka:
          topic: idpay-transaction-rule-update
      tags:
        - name: "rescheduleRewardNotificationRefundRuleNotifyMessage"
  recovery-reschedule-Reward-Notification-Reward-Trx-Notify-Evaluation-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRewardNotificationRewardTrxNotifyEvaluationMessage'
      bindings:
        kafka:
          topic: idpay-transaction
      tags:
        - name: "rescheduleRewardNotificationRewardTrxNotifyEvaluationMessage"
  recovery-reschedule-Reward-Notification-Iban-Notify-Outcome-Evaluation-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRewardNotificationIbanNotifyOutcomeEvaluationMessage'
      bindings:
        kafka:
          topic: idpay-checkiban-outcome
      tags:
        - name: "rescheduleRewardNotificationIbanNotifyOutcomeEvaluationMessage"
  recovery-reschedule-Reward-Notification-Upload-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRewardNotificationUploadMessage'
      bindings:
        kafka:
          topic: idpay-reward-notification-storage-events
      tags:
        - name: "rescheduleRewardNotificationUploadMessage"
  recovery-reschedule-Reward-Notification-Feedback-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRewardNotificationFeedbackMessage'
      bindings:
        kafka:
          topic: idpay-reward-notification-response
      tags:
        - name: "rescheduleRewardNotificationFeedbackMessage"
  recovery-reschedule-Reward-Notification-Delete-Initiative-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleRewardNotificationDeleteInitiativeMessage'
      bindings:
        kafka:
          topic: idpay-commands
      tags:
        - name: "rescheduleRewardNotificationDeleteInitiativeMessage"

  recovery-consume-iban-error:
    subscribe:
      message:
        $ref: '#/components/messages/ConsumeIbanError'
      bindings:
        kafka:
          topic: idpay-error-topic
      tags:
        - name: "consumeIbanError"
  recovery-reschedule-Iban-ToWallet-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleIbanToWalletMessage'
      bindings:
        kafka:
          topic:
      tags:
        - name: "rescheduleSendIbanToWalletMessage"
  recovery-reschedule-Check-Iban-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleCheckIbanMessage'
      bindings:
        kafka:
          topic:
      tags:
        - name: "rescheduleCheckIbanMessage"

  recovery-consume-admissibility-assessor-error:
    subscribe:
      message:
        $ref: '#/components/messages/ConsumeAdmissibilityAssessorError'
      bindings:
        kafka:
          topic: idpay-error-topic
      tags:
        - name: "consumeAdmissibilityAssessorError"
  recovery-reschedule-Beneficiary-Rule-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleBeneficiaryRuleMessage'
      bindings:
        kafka:
          topic: idpay-beneficiary-rule-update
      tags:
        - name: "rescheduleBeneficiaryRuleMessage"
  recovery-reschedule-Command-Mediator-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleCommandMediatorMessage'
      bindings:
        kafka:
          topic: idpay-onboarding-request
      tags:
        - name: "rescheduleCommandMediatorMessage"
  recovery-reschedule-Onboarding-Request-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleOnboardingRequestMessage'
      bindings:
        kafka:
          topic: idpay-commands
      tags:
        - name: "rescheduleOnboardingRequestMessage"
  recovery-reschedule-Onboarding-Notifier-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleOnboardingNotifierMessage'
      bindings:
        kafka:
          topic: idpay-onboarding-outcome
      tags:
        - name: "rescheduleOnboardingNotifierMessage"
  recovery-reschedule-Ranking-Notifier-Message:
    publish:
      message:
        $ref: '#/components/messages/rescheduleRankingNotifierMessage'
      bindings:
        kafka:
          topic: idpay-onboarding-ranking-request
      tags:
        - name: "rescheduleRankingNotifierMessage"

  recovery-consume-reward-user-id-splitter-error:
    subscribe:
      message:
        $ref: '#/components/messages/ConsumeRewardUserIdSplitterError'
      bindings:
        kafka:
          topic: idpay-error-topic
      tags:
        - name: "consumeRewardUserIdSplitterError"
  recovery-reschedule-Transaction-Evaluation-Notify-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleTransactionEvaluationNotifyMessage'
      bindings:
        kafka:
          topic:
      tags:
        - name: "rescheduleTransactionEvaluationNotifyMessage"
  recovery-reschedule-Enriched-Transactio-Message:
    publish:
      message:
        $ref: '#/components/messages/RescheduleEnrichedTransactionMessage'
      bindings:
        kafka:
          topic:
      tags:
        - name: "rescheduleEnrichedTransactionMessage"

components:
  messages:
    ConsumeRewardCalculatorError:
      contentType: application/json
      description: >-
        This event is sent to notify of an error in the reward calculator service and potentially reschedule the message
      summary: Notification of error in reward calculator service and potential rescheduling
      payload:
        oneOf:
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/TransactionProcessed"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionEnrichedDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/RuleUpdate"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-payment-instrument/main/specs/asyncapi.yml#/components/schemas/RuleEngineRequestDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/HpanUpdateOutcomeDTO"
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-payment/main/specs/asyncapi.yml#/components/schemas/TransactionInProgress'
    RescheduleRewardTransactionMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the reward transaction mesage for the reward calculator service 
      summary: Rescheduled the the reward transaction mesage
      payload:
        oneOf:
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/TransactionProcessed"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionEnrichedDTO"
    RescheduleRewardRuleBuilderMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the reward rule builder mesage for the reward calculator service 
      summary: Rescheduled the the reward rule builder transaction mesage
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/RuleUpdate"
    RescheduleHpanUpdateEvaluationMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the hpan update evaluation mesage for the reward calculator service 
      summary: Rescheduled the hpan update evaluation mesage
      payload:
        oneOf:
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-payment-instrument/main/specs/asyncapi.yml#/components/schemas/RuleEngineRequestDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/HpanUpdateOutcomeDTO"
    RescheduleUserCounterUnlockEvaluationMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the user counter unlock evaluation mesage for the reward calculator service 
      summary: Rescheduled the user counter unlock evaluation mesage
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionEnrichedDTO"


    ConsumePaymentInstrumentError:
      contentType: application/json
      description: >-
        This event is sent to notify of an error in the payment instrument service and potentially reschedule the message
      summary: Notification of error in payment istrument service and potential rescheduling
      payload:
        oneOf:
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-payment-instrument/main/specs/asyncapi.yml#/components/schemas/RTDOperationDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-payment-instrument/main/specs/asyncapi.yml#/components/schemas/RuleEngineRequestDTO"
    RescheduleRtdMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the rtd mesage for the payment instrument service 
      summary: Rescheduled the rtd mesage
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-payment-instrument/main/specs/asyncapi.yml#/components/schemas/RTDOperationDTO"
    RescheduleRuleEngineMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the rule engine mesage for the payment instrument service 
      summary: Rescheduled the rule engine mesage
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-payment-instrument/main/specs/asyncapi.yml#/components/schemas/RuleEngineRequestDTO"
    
    
    ConsumeWalletError:
      contentType: application/json
      description: >-
        This event is sent to notify of an error in the wallet service and potentially reschedule the message
      summary: Notification of error in wallet service and potential rescheduling
      payload:
        oneOf:
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-wallet/main/specs/asyncapi.yml#/components/schemas/IbanQueueDTO"
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-payment/main/specs/asyncapi.yml#/components/schemas/TransactionInProgress'
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/TransactionProcessed'
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionRejectedDTO'
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-wallet/main/specs/asyncapi.yml#/components/schemas/NotificationQueueDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-wallet/main/specs/asyncapi.yml#/components/schemas/QueueOperationDTO"
    RescheduleWalletEnrollIbanMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the wallet enroll iban message for the wallet service 
      summary: Rescheduled the wallet enroll iban message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-wallet/main/specs/asyncapi.yml#/components/schemas/IbanQueueDTO"
    RescheduleWalletRewardTransactionMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the wallet reward transaction message for the wallet service 
      summary: Rescheduled the wallet reward transaction message
      payload:
        oneOf:
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-payment/main/specs/asyncapi.yml#/components/schemas/TransactionInProgress'
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/TransactionProcessed'
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionRejectedDTO'
    RescheduleWalletNotificationMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the wallet notification message for the wallet service 
      summary: Rescheduled the wallet notificaion message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-wallet/main/specs/asyncapi.yml#/components/schemas/NotificationQueueDTO"
    RescheduleWalletTimelineMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the wallet timeline message for the wallet service 
      summary: Rescheduled the wallet timeline message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-wallet/main/specs/asyncapi.yml#/components/schemas/QueueOperationDTO"

    ConsumeTransactionError:
      contentType: application/json
      description: >-
        This event is sent to notify of an error in the transaction service and potentially reschedule the message
      summary: Notification of error in transaction service and potential rescheduling
      payload:
        oneOf:
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-payment/main/specs/asyncapi.yml#/components/schemas/TransactionInProgress'
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/TransactionProcessed'
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionRejectedDTO'
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/QueueCommandOperationDTO"
    RescheduleNotifyTransactionMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the notify transaction message for the transaction service 
      summary: Rescheduled the notify transaction message
      payload:
        oneOf:
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-payment/main/specs/asyncapi.yml#/components/schemas/TransactionInProgress'
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/TransactionProcessed'
          - $ref: 'https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionRejectedDTO'
    RescheduleNotifyTransactionCommandsMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the notify transaction commands message for the transaction service 
      summary: Rescheduled the notify transaction commands message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/QueueCommandOperationDTO"
    
    ConsumeRewardNotificationError:
      contentType: application/json
      description: >-
        This event is sent to notify of an error in the reward notification service and potentially reschedule the message
      summary: Notification of error in reward notification service and potential rescheduling
      payload:
        oneOf:
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/RuleUpdate"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-payment/main/specs/asyncapi.yml#/components/schemas/TransactionInProgress"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/TransactionProcessed"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionRejectedDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-notification/main/specs/asyncapi.yaml#/components/schemas/StorageEventDto"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-notification/main/specs/asyncapi.yaml#/components/schemas/RewardFeedbackDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/QueueCommandOperationDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-iban/main/specs/asyncapi.yml#/components/schemas/IbanQueueWalletDTO"
    RescheduleRewardNotificationRefundRuleNotifyMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the refund rule notify message for the reward notification service 
      summary: Rescheduled the refund rule notify message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/RuleUpdate"
    RescheduleRewardNotificationRewardTrxNotifyEvaluationMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the reward transaction notify evalution message for the reward notification service 
      summary: Rescheduled the reward transaction notify evalution message
      payload:
        oneOf:
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-payment/main/specs/asyncapi.yml#/components/schemas/TransactionInProgress"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-calculator/main/specs/asyncapi.yaml#/components/schemas/TransactionProcessed"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionRejectedDTO"
    RescheduleRewardNotificationIbanNotifyOutcomeEvaluationMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the iban notify outcome evaluation message for the reward notification service 
      summary: Rescheduled the iban notify outcome evaluation message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-iban/main/specs/asyncapi.yml#/components/schemas/IbanQueueWalletDTO"
    RescheduleRewardNotificationUploadMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the reward notification upload message for the reward notification service 
      summary: Rescheduled the reward notification upload message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-notification/main/specs/asyncapi.yaml#/components/schemas/StorageEventDto"
    RescheduleRewardNotificationFeedbackMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the reward notification feedback message for the reward notification service 
      summary: Rescheduled the reward notification feedback message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-notification/main/specs/asyncapi.yaml#/components/schemas/RewardFeedbackDTO"
    RescheduleRewardNotificationDeleteInitiativeMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the delete initiative message for the reward notification service 
      summary: Rescheduled the delete initiative message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/QueueCommandOperationDTO"
    
    ConsumeIbanError:
      contentType: application/json
      description: >-
        This event is sent to notify of an error in the iban service and potentially reschedule the message
      summary: Notification of error in iban service and potential rescheduling
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-wallet/main/specs/asyncapi.yml#/components/schemas/IbanQueueDTO"
    RescheduleIbanToWalletMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the iban to wallet message for the iban service 
      summary: Rescheduled the iban to wallet message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-wallet/main/specs/asyncapi.yml#/components/schemas/IbanQueueDTO"
    RescheduleCheckIbanMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the check iban message for the iban service 
      summary: Rescheduled the check iban message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-wallet/main/specs/asyncapi.yml#/components/schemas/IbanQueueDTO"

    ConsumeAdmissibilityAssessorError:
      contentType: application/json
      description: >-
        This event is sent to notify of an error in the admissibility assessor service and potentially reschedule the message
      summary: Notification of error in admissibility assessor service and potential rescheduling
      payload:
        oneOf:
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/RuleUpdate"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/QueueCommandOperationDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-admissibility-assessor/main/specs/asyncapi.yml#/components/schemas/OnboardingDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-admissibility-assessor/main/specs/asyncapi.yml#/components/schemas/EvaluationCompletedDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-admissibility-assessor/main/specs/asyncapi.yml#/components/schemas/RankingRequestDTO"
    RescheduleBeneficiaryRuleMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the beneficiary rule message for the admissibility assessor service 
      summary: Rescheduled the beneficiary rule message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/RuleUpdate"
    RescheduleCommandMediatorMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the command mediator message for the admissibility assessor service 
      summary: Rescheduled the command mediator message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-portal-welfare-backend-initiative/main/specs/asyncapi.yml#/components/schemas/QueueCommandOperationDTO"
    RescheduleOnboardingRequestMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the onboarding request message for the admissibility assessor service 
      summary: Rescheduled the onboarding request message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-admissibility-assessor/main/specs/asyncapi.yml#/components/schemas/OnboardingDTO"
    RescheduleOnboardingNotifierMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the onboarding notifier message for the admissibility assessor service 
      summary: Rescheduled the onboarding request message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-admissibility-assessor/main/specs/asyncapi.yml#/components/schemas/EvaluationCompletedDTO"
    rescheduleRankingNotifierMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the ranking notifier message for the admissibility assessor service 
      summary: Rescheduled the ranking notifier message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-admissibility-assessor/main/specs/asyncapi.yml#/components/schemas/RankingRequestDTO"

    ConsumeRewardUserIdSplitterError:
      contentType: application/json
      description: >-
        This event is sent to notify of an error in the reward user id splitter service and potentially reschedule the message
      summary: Notification of error in reward user id splitter service service and potential rescheduling
      payload:
        oneOf:
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionDTO"
          - $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionEnrichedDTO"
    RescheduleTransactionEvaluationNotifyMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the transaction evaluation notify message for the reward user id splitter service 
      summary: Rescheduled the transaction evaluation notify message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionDTO"
    RescheduleEnrichedTransactionMessage:
      contentType: application/json
      description: >-
        This event is produced to rescheduled the enriched transaction message for the reward user id splitter service 
      summary: Rescheduled the enriched transaction message
      payload:
        $ref: "https://raw.githubusercontent.com/pagopa/idpay-reward-user-id-splitter/main/specs/asyncapi.yaml#/components/schemas/TransactionEnrichedDTO"


